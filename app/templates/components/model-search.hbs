<div class="panel panel-transparent">
  <div class="panel-body">
    <h2 class="search">Find an appropriate repository for your data</h2>

    <span class="help-block">The Repository Finder tool helps researchers in the Earth, Space, and Environmental Sciences find an appropriate repository to deposit their research data. Repository Finder uses information about more than 2,000 data repositories from <a href="https://www.re3data.org">re3data</a>. The service is developed as part of the <a href="https://eos.org/agu-news/enabling-fair-data-across-the-earth-and-space-sciences">Enabling FAIR Data Project</a>.</span>

    <form {{action "doSearch" query on="submit"}} class="form-horizontal">
      <label>Search for data repositories</label>
      <div id="search" class="input-group">
        {{input name="query" value=query class="form-control" placeholder='Type to search...' enter=(action 'doSearch')}}
        {{#if hasInput}}
          <span id="search-clear" title="Clear" aria-label="Clear" {{action 'clear'}}>{{fa-icon "times-circle"}}</span>
        {{/if}}
        <div class="input-group-btn">
          <button type="submit" class="btn btn-primary hidden-xs">Search</button>
        </div>
      </div>
      <span class="help-block search-form">Search for data repositories in re3data by respository name, keyword, country, or any other repository information collected by re3data. Or leave this field blank and filter repositories via the criteria below.</span>
    </form>

    <div class="form-group">
      <label>Select the primary science domain of your research</label>
      {{#power-select
        options=subjects
        selected=selectedSubject
        onchange=(action "doSubject")
        allowClear=true
        as |subj|
      }}
        {{#if (lt subj.id 100)}}
          <strong>{{subj.name}}</strong>
        {{else if (lt subj.id 1000)}}
          <strong>{{subj.name}}</strong>
        {{else}}
          {{subj.name}}
        {{/if}}
      {{/power-select}}
      <span class="help-block">Pick the one subject area from the list of re3data subject areas for the Earth, Space, and Environmental Sciences that best describes your research. Or leave this field blank to search for all repositories in re3data, including generalist and institutional repositories.</span>
    </div>

    <label class="search-form">Filter repositories via criteria recommended by the <a href="https://eos.org/agu-news/enabling-fair-data-across-the-earth-and-space-sciences">Enabling FAIR Data Project</a></label> 

    {{#bs-collapse collapsed=collapsed}}
      <div class="form-group">
        <div class="checkbox">
          <label>
            {{input type="checkbox" name="open" checked=open click=(action 'doOpen' value="target.checked")}} The repository provides open access to its data
          </label>
        </div>
        <span class="help-block">Research data hosted by the repository are accessible without restrictions.</span>
      
        <div class="checkbox">
          <label>
            {{input type="checkbox" name="pid" checked=pid click=(action 'doPid' value="target.checked")}} The repository uses persistent identifiers
          </label>
        </div>
        <span class="help-block">Persistent identifiers uniquely identifier datasets, enable the linking to publications, authors and funding, and help with discovery.</span>

        <div class="checkbox">
          <label>
            {{input type="checkbox" name="certified" checked=certified click=(action 'doCertified' value="target.checked")}} The repository has been certified
          </label>
        </div>
        <span class="help-block">Certified repositories (e.g. via <a href="https://www.coretrustseal.org/">CoreTrustSeal</a>) fulfill a catalogue of requirements that reflect the core characteristics of a trustworthy data repository.</span>
      </div>
    {{/bs-collapse}}

    {{#if (gt model.meta.total 1)}}
      {{#if sortable}}
        <div id="sort" class="input-group pull-right">
          <select onchange={{action 'sort' value="target.value"}}>
            {{#each-in formats as |key value|}}
              <option name="sort" value={{key}} selected={{eq sort key}}>{{value}}</option>
            {{/each-in}}
          </select>
        </div>
      {{/if}}
    {{/if}}

    <h3 class="repository-results">{{pluralize (format-number model.meta.total) modelName}}</h3>
  </div>
</div>
